<div class="comments_block" xmlns:nxu="http://nuxeo.org/nxweb/util"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jstl/core">




	<c:if
		test="#{currentDocument.hasFacet('Commentable') and (documentThreadedComments.size > 0)}">

		<div class="CDsummaryTitle">
			<div class="CDSummaryHeaders">
				<h:outputFormat value="#{messages['label.summary.comments']}">
					<f:param value="#{documentThreadedComments.size}" />
				</h:outputFormat>
			</div>
		</div>

		<!-- <h:outputText class="boldLabel"
      value="#{messages['label.summary.lastComments']}" /> -->
		<nxu:dataList var="threadEntry" value="#{documentThreadedComments}"
			styleClass="commentsOutput" rowIndexVar="rowIndex" rows="5" first="0">

			<h:panelGroup layout="block"
				style="margin-left:#{threadEntry.depth*25}px;"
				styleClass="#{nxu:test(rowIndex % 2 == 1, 'dataRowOdd', 'dataRowEven')}">

				<table width="100%" cellspacing="0" cellpadding="0" border="0">
					<tr>
						<td width="45%" style="padding:10px;">
							<table width="100%" cellspacing="0" cellpadding="0" border="0">
								<tr>
									<td align="left" width="25%">
										<div class="CDcommentAuthor">
											<h:outputText value="#{nxu:userFullName(threadEntry.comment.comment.author)}" />
										</div>
									</td>
									<td align="left" width="75%">
										<div class="CDcommentCreationDate">
											<h:outputText value="#{threadEntry.comment.comment.creationDate}">
												<f:convertDateTime pattern="#{nxu:basicDateAndTimeFormater()}" timeZone="#{timeZone}" />
											</h:outputText>
										</div>
									</td>
								</tr>
							</table>
						</td>

						<td width="55%" style="padding:10px;">
							<div class="CDCommentsQuote">
								<h:outputText value="#{threadEntry.comment.comment.text}" escape="false" />
							</div>
						</td>
					</tr>
				</table>
			</h:panelGroup>
		</nxu:dataList>

	</c:if>

</div>
