<c:if xmlns:c="http://java.sun.com/jstl/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:nxu="http://nuxeo.org/nxweb/util"
	xmlns:nxh="http://nuxeo.org/nxweb/html"
	xmlns:nxd="http://nuxeo.org/nxweb/document"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
	test="#{contentView != null}">
	
	<c:if test="false">
	Needed parameters: 
	 - contentView: the content view instance, mandatory
 	- contentViewRenderId the unique identifier used in main
  	 content view template
</c:if>

	<a4j:region id="#{contentViewRenderId}_contentViewActionsRegion">
		<a4j:outputPanel id="#{contentViewRenderId}_contentViewActionsPanel">
			<div class="listingLayoutSelector">
				<a4j:form id="contentViewLayoutSelectForm_#{contentViewRenderId}"
					ajaxSubmit="true">
					<ul class="layoutViewMode" style="display: inline;">
						<c:if test="#{contentView.showRefreshCommand}">
							<li><a4j:commandLink
									action="#{contentView.refreshAndRewindPageProvider()}"
									id="refreshContentViewLink"
									reRender="#{contentViewRenderId}_resultsPanel"
									ajaxSingle="true">
									<h:graphicImage value="/icons/refresh.png"
										alt="#{messages['label.refresh']}"
										title="#{messages['label.refresh']}"
										id="refreshContentViewImage" />
								</a4j:commandLink>
							</li>
						</c:if>
					</ul>
				</a4j:form>
			</div>

			<c:if test="#{contentView.showPageSizeSelector}">
				<div class="listingLayoutSelector">

					<c:if test="#{contentView.useGlobalPageSize}">
						<c:set var="pageSizeBinding"
							value="#{contentViewActions.currentGlobalPageSize}" />
					</c:if>
					<c:if test="#{not contentView.useGlobalPageSize}">
						<c:set var="pageSizeBinding"
							value="#{contentView.currentPageSize}" />
					</c:if>

					<a4j:form id="contentViewGlobalPageSizeFrom_#{contentViewRenderId}"
						ajaxSubmit="true">

						<p class="contentViewPageSelectorDesc">
							<h:outputText value="#{messages['label.contentview.pageSize']}" />
						</p>
						<h:selectOneMenu value="#{pageSizeBinding}"
							id="contentViewPageSizeSelector" styleClass="langSelect"
							onchange="Element.next(this).firstChild.click();">
							<f:convertNumber />
							<f:selectItem itemValue="5" itemLabel="5" />
							<f:selectItem itemValue="10" itemLabel="10" />
							<f:selectItem itemValue="20" itemLabel="20" />
							<f:selectItem itemValue="30" itemLabel="30" />
							<f:selectItem itemValue="40" itemLabel="40" />
							<f:selectItem itemValue="50" itemLabel="50" />
						</h:selectOneMenu>
						<div style="display: none;">
							<a4j:commandButton value="submit"
								reRender="#{contentViewRenderId}_resultsPanel" />
						</div>
					</a4j:form>
				</div>
			</c:if>
		</a4j:outputPanel>
	</a4j:region>
</c:if>
